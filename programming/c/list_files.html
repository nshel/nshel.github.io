<!DOCTYPE html>
<html lang="en-us"> 
    <head> 
        <title>How to List Files in a Directory - C</title>
        <meta charset="utf-8">
        <meta name="author" content="Mohammed Zayyad">
        <meta name="http-equiv" content="Content-Type: text/html">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="how to list file in a direcotry in c, how to get the list of files
        in direcotry in c, how to get the list of files in a folder in c, how to list files in a folder in c,
        dirent">


        <!-- $$$$$$$$$$$$$$$$$$$$$$ CSS Files $$$$$$$$$$$$$$$$$$$-->
        <!-- Vendors -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="assets/vendors/bootstrap-icons/bootstrap-icons.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

        <!-- Main CSS Files -->
        <link rel="stylesheet" href="../../main.css">
        <!-- Page Icon -->
        <link rel="icon" href="../../favicon.png">

        <!-- Google -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3405758737390269" crossorigin="anonymous"></script>
    </head>

    <body class="page-index">
        <!-- Page Header -->
        <header id="header" class="header fixed-top d-flex align-items-center">
            <div class="container-fluid container-xl d-flex align-items-center justify-content-between">


                <a href="../../index.html" class="logo align-items-center d-flex">
                    <!-- <img src="favicon.png" alt="logo"> -->
                    <h1 class="d-flex align-items-center">NSH</h1>
                </a>

                <i class="mobile-nav-toggle mobile-nav-show bi bi-list"></i>
                <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"></i>

                <nav id="navbar" class="navbar">
                    <a href="../../index.html">Home</a>
                    <a href="index.html" class="active">C Codes</a>
                    <a href="../java/index.html">Java Codes</a>
                    <a href="../python/index.html">Python Codes</a>
                    <a href="../c++/index.html">C++ Codes</a>
                    <a href="#">About</a></li>
                    <a href="mailto:nshell.com@gmail.com">Contact</a>
                </nav> <!-- end navbar -->
            </div>
        </header> <!-- end header -->

        <div class="main">           
            
            <!-- Breadcrumbs -->
            <section class="breadcrumbs d-flex align-items-center" style="background-image:  url('../../assets/img/c/list_file_c.jpg');">
                <div class="container position-relative d-flex flex-column align-items-center">

                        <h2 data-aos="fade-up">HOW TO</h2>
                        <p data-aos="fade-up" data-aos-delay="50">
                            List Files in a Directory
                        </p>

                    </div>
                </div>
            </section> <!-- end section['hero'] -->
            
            <section id="post" class="post">
                <div class="container" data-aos="fade-up">

                    <div class="row g-5">
                        <div class="col-lg-9 shadow" data-aos="fade-up" data-aos-delay="200">

                            <article class="post-details">

                                <h2 class="title"><span class="color-primary">How To</span> List Files in a Directory</h2>
                                
                                <div class="post-meta">
                                    <ul>
                                        <li class="d-flex align-items-center"><i class="bi bi-clock"><span class="text-muted"> Posted</span><time datetime="2022-06-14"> Jun, 18 2022</i></li>
                                        <li class="d-flex align-items-center"><i class="bi bi-clock"><span class="text-muted"> Last updated</span><time datetime="2022-09-29"> Sep, 29 2022</i></li>
                                    </ul>
                                </div> <!-- END POST-META -->
                                <div class="content">
                                     <p> 
                                        There may come atime when you want to work with files/directories in your C programs,
                                        or maybe you're writing a program that needs to list the files in a specific directory.
                                        To work with directories in C we need to include the <b><i>dirent.h</i></b>
                                        header file to our code.<br>
                                        First include these library header files<br><br>
                                    </p>
                                    <div class="code-container">
                                        <div class="top"><span class="a"></span>&nbsp;<span class="b"></span>&nbsp;<span class="c"></span>
                                        </div><br><div class="line"></div><br>
                                        <div id="c-code">
                                        #include &lt;stdio.h&gt;<br>
                                        #include &lt;dirent.h&gt;<br>
                                        </div>
                                    </div><br><br>
                                    <p>
                                        Then we declare a <b><i>dirent</i></b> structure, the <b><i>dirent</i></b> structure
                                        holds information about a file or folder in a directory.<br><br>
                                    </p>
                                    <div class="code-container"> 
                                        <div class="top"><span class="a"></span>&nbsp;<span class="b"></span>&nbsp;<span class="c"></span>
                                        </div><br><div class="line"></div><br>
                                        <div id="c-code">
                                        // structure that holds info of a file in a dir<br>
                                        struct dirent *dir;<br><br>

                                        // Open the current working directory<br>
                                        DIR *dir2 = opendir(&quot;.&quot;);<br>
                                        </div>
                                    </div>
                                    <br><br>
                                    <p>
                                        Now the <b><i>dir2</i></b> variable points to the list of all files
                                        in a directory. <br>
                                        The <i><b>opendir()</b></i> takes a path of a direcotry you wish to work
                                        with as an argument, so in this example we're refering to the our current working direcotry,
                                        note that this depends on where you run the program.<br> 
                                        Next we'll use a for loop to loop through all those files.
                                    </p>
                                    <br>
                                    <div class="code-container">
                                        <div class="top"><span class="a"></span>&nbsp;<span class="b"></span>&nbsp;<span class="c"></span>
                                        </div><br><div class="line"></div><br>
                                        <div id="c-code">
                                        if (dir2 != NULL) {<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;// the readdir returns a dirent strcuture for a specific file/directory<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;for (dir = readdir(dir2); dir != NULL; dir = readdir(dir2)) {<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&quot;%s\n&quot;, dir->d_name);<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;}<br><br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;//close the directory<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;closedir(dir2);<br>
                                            } else {<br>
                                            &nbsp;&nbsp;&nbsp;&nbsp;printf(&quot;Error&quot;);<br>
                                        }
                                        </div>                            
                                    </div><br>
                                    <p>
                                        In the above code, we  first make sured that the direcotry exists otherwise
                                        it prints out an error.<br>
                                        The <b><i>readdir()</i></b> returns a dirent structure which points to
                                        a specific file/folder.<br> We're not doing much here, we;re just printing out
                                        the name of the file/folder in the direcotry.<br>
                                        After you're done working with the directory make sure you always close it
                                        with the <b><i>closedir()</i></b> function. 
                                    </p>
                                    <h3>Full Source Code:</h3>
                                    <div class="code-container"> 
                                        <div class="top"><span class="a"></span>&nbsp;<span class="b"></span>&nbsp;<span class="c"></span>
                                        </div><br><div class="line"></div><br>
                                        <div id="c-code">
                                        #include &lt;stdio.h&gt;<br>
                                        #include &lt;dirent.h&gt;<br><br>
                                        int main() {<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;// structure that holds info of a file in a dir<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;struct dirent *dir;<br><br>

                                        &nbsp;&nbsp;&nbsp;&nbsp;// Open the current working directory<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;DIR *dir2 = opendir(&quot;.&quot;);<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;if (dir2 != NULL) {<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// the readdir returns a dirent strcuture for a specific file/folder<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (dir = readdir(dir2); dir != NULL; dir = readdir(dir2)) {<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&quot;%s\n&quot;, dir->d_name);<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//close the directory<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closedir(dir2);<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;} else {<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&quot;Error&quot;);<br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;}<br><br>

                                        &nbsp;&nbsp;&nbsp;&nbsp;return 0;<br>

                                        }
                                        </div>
                                    </div>

                                </div> <!-- END Content-->

                            </article> <!-- End POST details -->

                        </div>
                    </div>

                </div> <!-- Container -->

            </section> <!-- Section POST -->
        
        </div> <!-- Main -->

        <!-- Script Files -->
        <script src="assets/vendors/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script src="../../main.js"></script>
        <script src="c.js"></script>
    </body>
</html>